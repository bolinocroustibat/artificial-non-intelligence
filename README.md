# Artificial Non Intelligence


## Data

- As a SQLite database, located in /data.
- As a JSON file from Kaggle and generated by an external Notebook, located in /data.


## Database

Schema:

```sql
CREATE TABLE comments (
	id INTEGER NOT NULL PRIMARY KEY,
	content TEXT NOT NULL,
	real INTEGER NOT NULL,
	aggressive INTEGER,
	difficulty INTEGER,
	created timestamp DEFAULT CURRENT_TIMESTAMP
);
```

```sql
CREATE TABLE answers (
	id INTEGER NOT NULL PRIMARY KEY,
	answer INT NOT NULL,
	ip VARCHAR,
	COMMENT INTEGER NOT NULL,
	FOREIGN KEY (COMMENT) REFERENCES comments (id)
);
```

To remove duplicate from comments table:
```sql
DELETE FROM comments
WHERE id NOT in(
		SELECT
			min(id)
			FROM comments
		GROUP BY
			content);
```


## API

To launch the API locally:

`uvicorn api.main:app --reload`

To import a JSON file into the SQLite database:

`python api/import_json.py`


## To deploy on Heroku

Add Heroku app as origin, if necessary:
`heroku git:remote -a non-intelligence-api`

Deploy with:
`git push heroku main`


## Comments crawlers

Located in /data-crawler.

Python script to get comments from online website comments and put them in a SQlite database.

Launch the crawler with Python from typer command file:
```sh
python3 ./scraper/crawl.py [website-crawler]
```

for example, for the crawler "Le Figaro":
```sh
python3 ./scraper/crawl.py figaro
```
